# YouChat

## 《YouChat：简易在线互动聊天系统》项目实践报告书

| 项目名称 | YouChat：简易在线互动聊天系统 |
| :--- | :--- |
| 项目版本 | V1.0 |
| 编写人 | phakeandy |
| 完成日期 | 2025年9月15日 |

---

### 1. 引言

本项目（YouChat）是微信（WeChat）的一个克隆版。

#### 1.1 编写目的

本文档旨在详细阐述“YouChat”简易在线互动聊天系统的设计与实现方案。其主要目的包括：

* 明确项目范围：清晰界定项目需要实现的功能模块与性能指标，作为开发团队的工作指南。
* 指导后续开发：为系统设计、编码、测试和部署等后续阶段提供统一的、明确的依据。
* 作为验收标准：本文档将作为项目最终成果的评估和验收标准，确保项目交付物满足课程任务要求。
* 便于沟通与存档：为项目参与者（包括指导老师和团队成员）提供一个沟通和协作的基准，并作为项目的重要技术资料进行存档。

#### 1.2 项目背景

随着互联网技术的飞速发展，即时通讯（Instant Messaging, IM）已成为人们日常生活中不可或缺的沟通工具。从个人社交到企业协作，IM系统都扮演着至关重要的角色。
本项目作为《程序设计综合实践》课程的实践任务，旨在通过从零开始设计并开发一个功能完备的简易聊天系统，让我们能够将课堂上学到的软件工程理论、数据库技术、网络编程以及前端/后端开发知识融会贯通。通过这个项目，我们不仅能加深对核心技术原理的理解，还能全面体验软件开发的完整生命周期，锻炼解决实际问题的能力。

---

### 2. 任务概述

#### 2.1 项目目标

本项目的核心目标是设计并实现一个稳定、可靠、用户友好的C/S（客户端/服务器）架构在线互动聊天系统——YouChat。该系统应至少具备以下核心功能：

* 用户管理：支持新用户注册、现有用户登录及安全退出。
* 好友管理：用户可以搜索、添加和删除好友，并实时查看好友的在线状态。
* 即时通讯：支持好友间的私聊（一对一发送文字信息），保证消息的实时、准确传递。
* 扩展功能：在完成核心功能的基础上，实现群组聊天和文件传输功能，以丰富用户体验。

最终，项目将以完整的源代码、可执行程序（或部署说明）以及本实践报告书的形式进行交付。

#### 2.2 用户特点

本系统的目标用户及相关人员特点分析如下：

* 普通用户（学生/测试者）：
  * 熟悉常见的即时通讯软件（如微信、QQ），对聊天软件的基本操作有一定了解。
  * 具备基本的计算机操作能力，能够使用现代网页浏览器。
  * 期望系统界面简洁直观，操作流畅，响应迅速。
* 系统管理员/评审者（教师）：
  * 关注系统的架构设计是否合理，代码是否规范。
  * 关注系统功能的完整性、稳定性和安全性。
  * 需要通过查阅文档和源代码，评估项目的完成质量和技术深度。

---

### 3. 非技术要求

#### 3.1 经费限制

本项目为课程实践项目，经费预算为零。所有开发和运行环境将基于免费和开源的软件进行构建。

* 开发工具：使用IDE（如VS Code）、数据库管理工具（如DBeaver）和版本控制系统（如Git）。
* 运行环境：优先在本地计算机上进行开发和部署。如需云端部署演示，将考虑使用云服务商提供的免费试用资源。

#### 3.2 交付工作产品

项目最终需要交付以下工作产品：

1. 项目源代码：包含所有前端和后端代码的完整压缩包，代码应有必要的注释，结构清晰。
2. 数据库文件：SQL脚本文件，用于创建数据库和初始化必要的数据表。
3. 部署说明文档（README.md）：详细说明如何在本地环境中配置、运行和部署本系统。
4. 项目实践报告书：即本文档，全面描述项目的需求、设计和实现细节。
5. （可选）系统演示视频：录制一段视频，展示系统的主要功能操作流程。

---

### 4. 系统环境

#### 4.1 系统架构

本系统采用经典的客户端/服务器（Client/Server）架构。

* 客户端（Client）：基于Web浏览器实现，采用前后端分离技术。用户通过浏览器访问系统界面，与服务器进行交互。
* 服务器（Server）：作为系统的核心，负责处理业务逻辑（如用户认证、消息转发、好友管理）、数据持久化以及与客户端的实时通信。
* 数据库（Database）：用于存储用户信息、好友关系、聊天记录等持久化数据。
* 通信协议：客户端与服务器之间的常规数据交互使用HTTP协议，实时消息传递则采用WebSocket协议，以实现低延迟、高效率的双向通信。

#### 4.2 软硬件运行环境

* 客户端硬件：任何能够流畅运行现代网页浏览器的PC或Mac。
* 客户端软件：Chrome、Firefox、Edge等主流现代浏览器。
* 服务器硬件：标准PC服务器或个人电脑（开发阶段），至少需要2核CPU，2GB内存。
* 服务器软件：
  * 操作系统：Linux (Ubuntu 20.04+)。
  * Web服务器：Nginx
  * 运行环境：Node.js，jdk 21

#### 4.3 软硬件开发环境

* 硬件环境：开发人员个人电脑。
* 软件环境：
  * 操作系统：Linux
  * 开发工具：Visual Studio Code
  * 前端技术栈：HTML5, CSS3, JavaScript (Vue.js)
    * 使用 tailwindcss daisyui
  * 后端技术栈：JDK21、Spring Boot
    * 安全框架：Spring Security
  * 数据库：Postgres
  * 版本控制：Git & GitHub

---

### 5. 性能需求

#### 5.1 正确性需求

* 消息传递：消息必须准确无误地发送给指定接收方（个人或群组），不能出现丢失、错序或重复的情况。
* 状态同步：用户上下线状态、好友列表的更新必须实时、准确地反映在所有相关客户端上。
* 数据一致性：数据库中的用户信息、好友关系等数据必须与用户的实际操作保持严格一致。

#### 5.2 安全性需求

* 用户认证：用户密码在数据库中必须经过哈希加盐（如使用bcrypt算法）处理，绝不能以明文形式存储。
* 传输安全：登录和注册等敏感操作应通过HTTPS（在部署时）进行，防止数据在传输过程中被窃听。
* 防范攻击：后端应具备基本的防SQL注入、防XSS（跨站脚本攻击）的能力。

#### 5.3 界面需求

* 直观性：界面设计应简洁、美观、布局合理，符合主流聊天软件的用户习惯。
* 易用性：功能操作应简单明了，用户无需复杂学习即可上手。
* 响应性：界面应能快速响应用户操作，提供及时的反馈（如加载提示、错误信息）。

#### 5.4 灵活性需求

* 系统应采用模块化设计，代码耦合度低，便于未来进行功能扩展（如增加音视频通话、表情包等功能）或技术升级。

#### 5.5 数据管理能力需求

* 系统应能支持至少50个并发用户在线，并能流畅处理消息收发。
* 数据库查询应进行优化，确保在数据量增长时，好友列表加载、历史消息查询等操作的响应时间在可接受范围内（如低于2秒）。

#### 5.6 故障处理能力需求

* 网络异常：当客户端与服务器断开连接时，系统应能自动检测并尝试重连。
* 操作失败：当用户执行的操作失败时（如添加好友失败、发送消息失败），系统应向用户提供清晰、友好的错误提示。
* 服务器鲁棒性：服务器端应对客户端的非法输入进行校验，避免因恶意数据导致服务崩溃。

---

### 6. 功能需求

本节将以文字描述的形式，详细说明系统的各项功能。

#### 6.1 F01: 用户注册

* 功能描述：未注册的用户可以通过此功能创建新账户。
* 事件流：
    1. 用户在登录界面点击“注册”链接/按钮。
    2. 系统显示注册页面，要求用户输入用户名、密码和确认密码。
    3. 用户填写信息后点击“注册”按钮。
    4. 系统后端验证用户名的唯一性，以及两次输入的密码是否一致。
    5. 如果验证通过，系统将用户信息（用户名和加密后的密码）存入数据库，并提示“注册成功”，然后跳转到登录页面。
    6. 如果用户名已存在或密码不一致，系统将向用户显示相应的错误提示。

#### 6.2 F02: 用户登录与退出

* 功能描述：已注册用户通过此功能验证身份，进入系统主界面。用户也可以主动退出登录。
* 登录事件流：
    1. 用户在登录页面输入用户名和密码，点击“登录”按钮。
    2. 系统后端验证用户名是否存在，以及提交的密码与数据库中存储的加密密码是否匹配。
    3. 验证成功后，系统生成一个身份令牌（Token）返回给客户端，并跳转到聊天主界面。客户端将此令牌保存，用于后续请求的身份验证。
    4. 验证失败，系统显示“用户名或密码错误”的提示。
* 退出登录事件流：
    1. 用户在主界面点击“退出登录”按钮。
    2. 客户端清除本地保存的身份令牌。
    3. 系统将用户重定向到登录页面。

#### 6.3 F03: 好友管理

* 功能描述：用户可以添加、删除好友，并查看自己的好友列表。
* 子功能 1: 添加好友
    1. 用户在搜索框中输入对方的用户名进行搜索。
    2. 系统返回匹配的用户列表。
    3. 用户点击目标用户旁的“添加好友”按钮。
    4. 系统在好友关系表中创建一条记录（或发送好友请求，简化版可直接添加）。
    5. 双方的好友列表实时更新。
* 子功能 2: 删除好友
    1. 用户在好友列表中右键点击某位好友，选择“删除好友”。
    2. 系统弹出确认对话框。
    3. 用户确认后，系统从数据库中删除对应的双向好友关系记录。
    4. 双方的好友列表实时更新。
* 子功能 3: 查看好友列表
    1. 用户登录后，主界面左侧默认显示好友列表。
    2. 好友列表显示好友的用户名和在线状态（在线/离线）。

#### 6.4 F04: 一对一通信

* 功能描述：用户可以与好友进行实时的文字信息交流。
* 事件流：
    1. 用户在好友列表中点击一位好友。
    2. 系统在主聊天窗口加载与该好友的聊天界面，并显示历史聊天记录。
    3. 用户在输入框中输入文字，点击“发送”按钮或按Enter键。
    4. 客户端通过WebSocket将消息（包含发送方、接收方、内容、时间戳）发送到服务器。
    5. 服务器收到消息后，将其存入数据库，并查询接收方是否在线。
    6. 如果接收方在线，服务器通过其对应的WebSocket连接将消息实时推送给接收方客户端。
    7. 发送方和接收方的聊天窗口同时显示出这条新消息。

#### 6.5 F05: 群聊天

* 功能描述：用户可以加入群组，并在群组内发送和接收消息。
* 事件流：
    1. 用户可以创建群聊或被邀请加入群聊（简化版可以设置为默认加入某个公共群聊）。
    2. 用户在群组列表中点击一个群组，进入群聊界面。
    3. 用户在输入框输入消息并发送。
    4. 服务器接收到消息后，将消息存入数据库，并获取该群组的所有成员列表。
    5. 服务器遍历成员列表，向所有在线的群成员推送该消息。
    6. 所有在线群成员的聊天窗口都会显示这条新消息。

#### 6.6 F06: 发送文件

* 功能描述：用户可以在聊天中向好友发送图片、文档等文件。
* 事件流：
    1. 用户在聊天窗口点击“发送文件”按钮，选择一个本地文件。
    2. 客户端将文件通过HTTP POST请求上传到服务器指定的静态资源目录。
    3. 上传成功后，服务器返回一个文件的URL访问地址。
    4. 客户端将这个URL地址作为一条特殊类型的消息，通过WebSocket发送给服务器（流程同文字消息）。
    5. 接收方的客户端收到这条消息后，将其解析为一个可点击的文件链接或图片预览。
    6. 用户点击链接即可下载或查看文件。
