spring:
  application:
    name: youchat

  # Docker Compose is disabled for integration tests - we use Testcontainers
  docker:
    compose:
      enabled: false

  # # Database configuration will be auto-configured by @ServiceConnection
  # datasource:
  #   # These will be overridden by Testcontainers
  #   url: jdbc:tc:postgresql:15-alpine:///youchat_integration
  #   username: integration
  #   password: integration

  # # Redis configuration - will be auto-configured by @ServiceConnection
  # data:
  #   redis:
  #     host: localhost
  #     port: 6379

  # Enable Flyway for integration tests
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  # Session configuration for integration tests
  session:
    store-type: redis
    timeout: 1800
    redis:
      namespace: youchat:integration

  # Test configuration
  test:
    database:
      replace: none

logging:
  level:
    root: WARN
    org:
      testcontainers: INFO
    top:
      phakeandy:
        youchat: DEBUG

---
# Profile for integration test with real containers
spring:
  config:
    activate:
      on-profile: integration-test
